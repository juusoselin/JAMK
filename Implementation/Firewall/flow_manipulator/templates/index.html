$def with (flows, message)

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/css/app.css">
    <title>Maninpulate Flow Entries in HPE VAN</title>
  </head>
  <body>
    <div class="container col-10">
    $if message:
      <div class="alert alert-info alert-dismissible fade show" role="alert">
        <button type="button" class="close" data-dismiss="alert">
          <span aria-hidden="true">&times</span>
        </button>$message
      </div>
    <h1>Maninpulate Flow Entries in HPE VAN</h1>

    <hr>
      <form action="/" method="POST">
        <fieldset>
          <legend>Add Flow</legend>
          <h5>Match fields:</h5>
          <div class="form-group row">
            <label for="table_id" class="col-1 col-form-label"><strong>Table ID:</strong></label>
            <div class="col-2">
              <input class="form-control" type="text" id="table_id" name="table_id">
            </div>
            <div class="col-9">
              <small></small>
            </div>
          </div>
          <div class="form-group row">
            <label for="priority" class="col-1 col-form-label">Priority:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="priority" name="priority">
            </div>
            <div class="col-9">
              <small>Priority within the specific flow table. Higher number indicates higher priority.</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="timeout" class="col-1 col-form-label">Timeout:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="timeout" name="timeout">
            </div>
            <div class="col-9">
              <small>Maximum tine before flow is expired. Leave empty for permanent flow.</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="in_port" class="col-1 col-form-label">In Port:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="in_port" name="in_port">
            </div>
            <div class="col-9">
              <small>Port number of receiving port</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="ip_proto" class="col-1 col-form-label"><strong>Protocol:</strong></label>
            <div class="col-2">
              <select class="form-control" name="ip_proto" id="ip_proto">
                  <option value="icmp">ICMP</option>
                  <option value="tcp" selected="">TCP</option>
                  <option value="udp">UDP</option>
                  <option value="">None</option>
              </select>
            </div>
            <div class="col-9">
              <small>Protocol type of IP</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="eth_type" class="col-1 col-form-label"><strong>Eth Type:</strong></label>
            <div class="col-2">
              <select class="form-control" name="eth_type" id="eth_type">
                  <option value="ipv4">IPv4</option>
                  <option value="arp">ARP</option>
                  <option value="">None</option>
              </select>
            </div>
            <div class="col-9">
              <small>Frame type of Ethernet</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="ipv4_src" class="col-1 col-form-label">IPv4 Src:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="ipv4_src" name="ipv4_src">
            </div>
            <div class="col-2">
              <input class="form-control" type="text" id="ipv4_src_mask" name="ipv4_src_mask">
            </div>
            <div class="col-7">
              <small>Source IP address of IPv4 and optional subnetmask.</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="ipv4_dst" class="col-1 col-form-label">IPv4 Dst:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="ipv4_dst" name="ipv4_dst">
            </div>
            <div class="col-2">
              <input class="form-control" type="text" id="ipv4_dst_mask" name="ipv4_dst_mask">
            </div>
            <div class="col-7">
              <small>Destination IP address of IPv4 and optional subnet mask</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="eth_src" class="col-1 col-form-label">Eth Src:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="eth_src" name="eth_src">
            </div>
            <div class="col-9">
              <small>Source MAC Address</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="eth_dst" class="col-1 col-form-label">Eth Dst:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="eth_dst" name="eth_dst">
            </div>
            <div class="col-9">
              <small>Destination MAC address</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="tcp_src" class="col-1 col-form-label">TCP Src:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="tcp_src" name="tcp_src">
            </div>
            <div class="col-9">
              <small>Source port number of TCP (must also have TCP in <strong>Protocol</strong>)</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="tcp_dst" class="col-1 col-form-label">TCP Dst:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="tcp_dst" name="tcp_dst">
            </div>
            <div class="col-9">
              <small>Destination port number of TCP (must also have TCP in <strong>Protocol</strong>)</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="udp_src" class="col-1 col-form-label">UDP Src:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="udp_src" name="udp_src">
            </div>
            <div class="col-9">
              <small>Source port number of UDP (must also have UDP in <strong>Protocol</strong>)</small>
            </div>
          </div>
          <div class="form-group row">
            <label for="udp_dst" class="col-1 col-form-label">UDP Dst:</label>
            <div class="col-2">
              <input class="form-control" type="text" id="udp_dst" name="udp_dst">
            </div>
            <div class="col-9">
              <small>Destination port number of UDP (must also have UDP in <strong>Protocol</strong>)</small>
            </div>
          </div>
        <h5>Instructions:</h5>
        <div class="form-group row">
          <label for="action" class="col-1 col-form-label">Action:</label>
          <div class="col-2">
            <select class="form-control" name="action" id="action">
                <option value="output">Output</option>
                <option value="drop" selected="">Drop</option>
                <option value="goto">Goto Table</option>
            </select>
          </div>
          <div class="col-9">
            <small></small>
          </div>
        </div>
        <div class="form-group row">
          <label for="output" class="col-1 col-form-label">Destination:</label>
          <div class="col-2">
            <input class="form-control" type="text" id="output" name="output">
          </div>
          <div class="col-9">
            <small>Output port or next table</small>
          </div>
        </div>
        </fieldset>
        <input type="submit" class="btn btn-primary" name="action" value="Insert Flow">
      </form>
    <hr>
    $if flows:
      <fieldset>
        <legend>Current Flows</legend>
          <form action="/" method="POST">
            <input type="submit" class="btn btn-danger" name="action" value="Delete All Flows">
          </form>
          <hr>
            <table class="table table-striped table-hover tiny-table">
              <thead>
                <tr>
                  <th>Table</th>
                  <th>Priority</th>
                  <th>Timeout</th>
                  <th>Packets</th>
                  <th>Bytes</th>
                  <th>In Port</th>
                  <th>Eth Type</th>
                  <th>IP Proto</th>
                  <th>IPv4 Src</th>
                  <th>IPv4 Dst</th>
                  <th>Mask</th>
                  <th>Eth_Src</th>
                  <th>Eth_Dst</th>
                  <th>TCP_Src</th>
                  <th>TCP_Dst</th>
                  <th>UDP_Src</th>
                  <th>UDP_Dst</th>
                  <th>Actions</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                $for index, flow in enumerate(flows):
                  <tr>
                    <td>$flow[8]['table_id']</td>
                    <td>$flow[5]['priority']</td>
                    <td>$flow[1]['hard_timeout']</td>
                    <td>$flow[0]['packet_count']</td>
                    <td>$flow[2]['byte_count']</td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "in_port":
                            $value
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "eth_type":
                            $value
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "ip_proto":
                            $value
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "ipv4_src":
                            $value
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "ipv4_dst":
                            $value
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "mask":
                            $value <br />
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "eth_src":
                            $value
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "eth_dst":
                            $value
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "tcp_src":
                            $value
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "tcp_dst":
                            $value
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "udp_src":
                            $value
                    </td>
                    <td>
                      $for match in flow[10]['match']:
                        $for key, value in match.items():
                          $if key == "udp_dst":
                            $value
                    </td>
                    <td>
                      $for instruction in flow[11]['instructions']:
                        $for key, value in instruction.items():
                          $if isinstance(value, list):
                            $key -> (
                            $for dict in value:
                              $for item, value in dict.items():
                                $item : $value
                            )
                          $else:
                            $key : $value
                    </td>
                    <td>
                      <a href="/delete?id=$index" class="btn btn-danger btn-sm">Delete</a>
                    </td>
                  </tr>
              </tbody>

            </table>
        </fieldset>
      </form>

    </div>

    <!-- jQuery first, then Tether, then Bootstrap JS. -->
    <script src="static/js/jquery-3.1.1.slim.min.js"></script>
    <script src="static/js/tether.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
  </body>
</html>
